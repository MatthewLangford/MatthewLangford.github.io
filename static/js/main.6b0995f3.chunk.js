(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(73)},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),o=a(5),l=(a(39),a(41),a(43),function(e){var t=e.title;return r.a.createElement("div",{className:"title-header"},r.a.createElement("h1",null,t))}),i=a(13),u=a.n(i),d=a(23),p=a(24),h=a(25),m=a(28),y=a(26),f=a(29),E=a(4),b=a(7),k=a.n(b),v=a(3),S=a.n(v),g=(a(67),"SEARCH_RESULTS"),N="ERROR",w="ERROR_RATE";var O="BMC7PQQO0DZSICTZ",C="YTH6BC9T22YO34HQ";var A=/[^\w+.&-]/g,j=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(m.a)(this,Object(y.a)(t).call(this))).searchForClosestMatch=function(){var t=Object(d.a)(u.a.mark(function t(a){var n,r,c;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.recentSearches,!S.a.has(n,a)){t.next=4;break}return e.setState({searchArray:n[a]}),t.abrupt("return");case 4:return t.prev=5,t.next=8,k.a.get("https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(a,"&apikey=BMC7PQQO0DZSICTZ"));case 8:r=t.sent,c=r.data.bestMatches,S.a.isEmpty(c)||(n[a]=c,e.setState({searchArray:c})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),console.log(t.t0);case 17:case 18:case"end":return t.stop()}},t,this,[[5,14]])}));return function(e){return t.apply(this,arguments)}}(),e.state={inputValue:"",searchArray:[],recentSearches:{}},e.handleChange=e.handleChange.bind(Object(E.a)(Object(E.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(E.a)(Object(E.a)(e))),e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){this.props.refreshInput();var t=S.a.replace(e.target.value,A,"").toUpperCase();this.setState({inputValue:t}),t?this.searchForClosestMatch(t):this.setState({searchArray:[]})}},{key:"handleClick",value:function(e,t){this.setState({inputValue:t,searchArray:[]})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=!1,n=this.props,r=n.addedStocks,c=n.errorInput,s=this.state.inputValue;r.forEach(function(e){e["01. symbol"]===s&&(c(),t.setState({inputValue:"",searchArray:[]}),a=!0)}),a||(this.props.searchAndAddStockInfo(s),this.setState({searchArray:[],inputValue:""}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.inputValue,n=t.searchArray,c=this.props,s=c.inputError,o=c.errorRate;return r.a.createElement("div",{className:"add-stock-div"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{onChange:this.handleChange,value:a,className:"stock-input ".concat(s?"error":""),placeholder:" Enter stock symbol...",type:"text"}),r.a.createElement("input",{className:"add-button",type:"submit",value:"ADD",onClick:this.handleSubmit})),n&&""!==a&&r.a.createElement("ul",{className:"search-list"},n.map(function(t){var a=t["1. symbol"],n=t["2. name"];return r.a.createElement("li",{onClick:function(t){return e.handleClick(t,a)},key:a},r.a.createElement("span",null,a),r.a.createElement("span",null,n))})),s&&r.a.createElement("p",{className:"error-pop-up"},"Oops! The stock you entered has been added already or doesn't exist. Please try again."),o&&r.a.createElement("p",{className:"error-pop-up"},"Uh oh! This free api can't handle this many requests lol. Please try again in 10-20 seconds."))}}]),t}(n.Component),R=Object(o.b)(function(e){return{addedStocks:e.addedStocks,inputError:e.inputError,errorRate:e.errorRate}},function(e){return{searchAndAddStockInfo:function(t){return e(function(e){return function(t){k.a.get("https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=".concat(e,"&outputsize=full&apikey=").concat(C)).then(function(e){var a=e.data["Global Quote"];S.a.has(a,"01. symbol")?k.a.get("https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(a["01. symbol"],"&apikey=").concat(O)).then(function(e){S.a.isEmpty(e.data.bestMatches)?t({type:N,payload:!0}):(a.name=e.data.bestMatches[0]["2. name"],t({type:g,payload:a}))}):e.data.Note?t({type:w,payload:!0}):t({type:N,payload:!0})})}}(t))},refreshInput:function(){return e(function(e){e({type:N,payload:!1}),e({type:w,payload:!1})})},errorInput:function(){return e(function(e){return e({type:N,payload:!0})})}}})(j),x=(a(69),a(71),function(e){var t=e.stockInfo,a=t["01. symbol"],n=t["03. high"],c=t["04. low"],s=t["05. price"],o=t["09. change"],l=t["10. change percent"],i=t.name;return r.a.createElement("div",{className:"stock-card"},r.a.createElement("section",{className:"stock-card-top"},r.a.createElement("section",{className:"stock-card-top-left"},r.a.createElement("h4",{className:"stock-name-header"},S.a.truncate(i,{length:15})),r.a.createElement("p",{className:"stock-symbol"},a)),r.a.createElement("section",{className:"stock-card-top-right right"},r.a.createElement("p",{className:"stock-high"},"HI $",Number(n).toFixed(2)))),r.a.createElement("section",{className:"stock-card-bottom"},r.a.createElement("section",{className:"stock-card-bottom-left"},r.a.createElement("span",{className:"change-amount ".concat(o>0&&"pos")},o>0?r.a.createElement("span",null,"\u21eb "):r.a.createElement("span",null,"\u21e9 "),Number(o).toFixed(2),r.a.createElement("span",null," (",Number(l.slice(0,-1)).toFixed(2),"%)")),r.a.createElement("h3",{className:"stock-price"},"$",Number(s).toFixed(2))),r.a.createElement("section",{className:"stock-card-bottom-right"},r.a.createElement("p",{className:"stock-low"},"LO $",Number(c).toFixed(2)))))}),I=Object(o.b)(function(e){return{addedStocks:e.addedStocks}})(function(e){var t=e.addedStocks;return r.a.createElement("div",{className:"stock-list"},t.map(function(e,t){return r.a.createElement(x,{key:t,stockInfo:e})}),S.a.isEmpty(t)&&r.a.createElement("h1",{className:"no-stocks-header"},"No Stocks Yet!"))}),M=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(l,{title:"Stock Watcher"}),r.a.createElement(R,null),r.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=a(6),B=a(27),F={addedStocks:[],inputError:!1,errorRate:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object.assign({},e,{addedStocks:e.addedStocks.concat(t.payload)});case N:return Object.assign({},e,{inputError:t.payload});case w:return Object.assign({},e,{errorRate:t.payload});default:return e}},V=Object(T.c)(Q,Object(T.a)(B.a));s.a.render(r.a.createElement(o.a,{store:V},r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.6b0995f3.chunk.js.map